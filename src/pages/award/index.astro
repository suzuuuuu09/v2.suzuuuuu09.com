---
import { getAwardPosts } from "@/lib/post";
import BaseLayout from "@/layouts/BaseLayout.astro";
import AwardCard from "@/components/features/award/AwardCard.astro";
import SectionTitle from "@/components/shared/SectionTitle.astro";
import { Expand } from "@/components/shared/Expand";
import { AwardGrid } from "@/components/features/award/AwardGrid.tsx";

const awards = await getAwardPosts();
---

<BaseLayout title="Awards">
  <SectionTitle>Awards</SectionTitle>
  <Expand>
    {
      awards.length === 0 ? (
        <p>No awards found.</p>
      ) : (
        <AwardGrid>
          {awards.map((award) => (
            <AwardCard
              award={{
                id: award.id,
                data: {
                  ...award.data,
                  slug: award.data.slug ?? award.id,
                  description: award.data.description ?? undefined,
                },
              }}
            />
          ))}
        </AwardGrid>
      )
    }
  </Expand>
</BaseLayout>
