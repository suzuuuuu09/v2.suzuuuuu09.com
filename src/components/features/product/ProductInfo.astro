---
import { Flex, HStack, VStack, styled as s } from 'styled-system/jsx';
import TagList from '../blog/TagList.astro';
import Thumbnail from '@/components/shared/Thumbnail';
import ReadingTime from '@/components/shared/ReadingTime.astro';
import Date from '@/components/shared/Date.astro';

export interface Props {
  title: string;
  publishDate?: string | Date;
  updateDate?: string | Date;
  tags?: string[];
  thumbnail?: string;
  description?: string;
  author?: string;
  content?: string;
}

const {
  title,
  publishDate,
  updateDate,
  tags = [],
  thumbnail,
  description,
  author,
  content,
} = Astro.props as Props;
---

<VStack mb="8" gap="4">
  <Thumbnail
    thumbnailPath={thumbnail || ''}
    title={title}
    type="info"
    loading="eager"
  />

  <s.h1
    fontSize={{ base: "xl", sm: "2xl", md: "3xl", lg: "4xl" }}
    fontWeight="bold"
    textAlign="center"
    m="0"
    px={{ base: "4", sm: "6", md: "8" }}
    w="full"
    maxW="4xl"
    lineHeight={{ base: "tight", lg: "normal", xl: "snug" }}
    wordBreak="break-word"
    overflowWrap="break-word"
    hyphens="auto"
    color="sz.text.main"
  >
    {title}
  </s.h1>

  {tags.length > 0 && (
    <Flex
      justifyContent="center"
      flexDirection="center"
      flexWrap="wrap"
      mb="4"
      gap="2"
      maxW="4xl"
    >
      <TagList tags={tags} />
    </Flex>
  )}

  <Flex justify="center" rounded="lg" w="full" maxW="2xl">
    <Flex
      flexDirection="center"
      flexWrap="wrap"
      fontSize="sm"
      gap={{ base: 4, sm: 2 }}
      alignItems={{ sm: "start" }}
      color="sz.text.main"
    >
      <!-- 公開日 -->
      <Date
        date={publishDate || ""}
        gap="1.5"
        type="publish"
      />

      <!-- 更新日 -->
      <Date
        date={updateDate || ""}
        gap="1.5"
        type="update"
      />
      
      <ReadingTime content={content || ""} gap="1.5" />
    </Flex>
  </Flex>

  {description && (
    <s.p maxW="2xl" style={{ textAlign: 'center', lineHeight: 1.6 }}>
      {description}
    </s.p>
  )}
</VStack>
