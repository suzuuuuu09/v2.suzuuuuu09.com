---
import Tag from "./Tag.astro";
import dayjs from "dayjs";
import { Flex, styled as s } from "styled-system/jsx";
import { css } from "styled-system/css";
import Icon from "astro-iconify";

interface Props {
  title: string;
  publishDate?: string | Date;
  updateDate?: string | Date;
  tags?: string[];
  emoji?: string;
  description?: string;
}

const {
  title,
  publishDate,
  updateDate,
  tags = [],
  emoji,
  description,
} = Astro.props;
---

<s.div
  display="flex"
  flexDir="column"
  alignItems="center"
  mb="8"
  gap="4"
>
  <!-- 絵文字 -->
  {
    emoji && (
      <Flex
        alignItems="center"
        justifyContent="center"
        fontSize={{ base: "6xl", lg: "7xl" }}
      >
        {emoji}
      </Flex>
    )
  }

  <!-- タイトル -->
  <s.h1
    fontSize={{ base: "2xl", sm: "3xl", md: "4xl", lg: "5xl" }}
    fontWeight="bold"
    textAlign="center"
    m="0"
    px={{ base: "4", sm: "6", md: "8" }}
    w="full"
    maxW="4xl"
    lineHeight={{ base: "tight", lg: "normal", xl: "snug" }}
    wordBreak="break-word"
    overflowWrap="break-word"
    hyphens="auto"
  >
    {title}
  </s.h1>

  <!-- タグ -->
  {
    tags.length > 0 && (
      <Flex
        justifyContent="center"
        alignItems="center"
        flexWrap="wrap"
        gap="2"
        mb="4"
      >
        {tags.map((tag) => (
          <Tag useHashTag name={tag} />
        ))}
      </Flex>
    )
  }

  <!-- メタデータ -->
  <s.div
    rounded="lg"
    w="full"
    maxW="2xl"
  >
    <Flex
      justifyContent="center"
      alignItems={{ base: "center", sm: "flex-start" }}
      flexWrap="wrap"
      gap={{ base: "4", sm: "6" }}
      fontSize="sm"
      color="sz.text.main"
    >
      <!-- 公開日 -->
      {
        publishDate && (
          <Flex alignItems="center" gap="1.5">
            <Icon name="mdi:calendar" size={16} />
            <span>{dayjs(publishDate).format("YYYY.MM.DD")}</span>
          </Flex>
        )
      }

      <!-- 更新日 -->
      {
        updateDate && (
          <Flex alignItems="center" gap="1.5">
            <Icon name="mdi:update" size={16} />
            <span>{dayjs(updateDate).format("YYYY.MM.DD")}</span>
          </Flex>
        )
      }
    </Flex>
  </s.div>

  {
    description && (
      <s.p
        textAlign="center"
        lineHeight="relaxed"
        maxW="2xl"
        color="sz.text.main"
        px="4"
      >
        {description}
      </s.p>
    )
  }
</s.div>
