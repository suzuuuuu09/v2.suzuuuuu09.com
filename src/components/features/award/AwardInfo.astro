---
import { Flex, VStack, HStack, styled as s } from "styled-system/jsx";
import TagList from "@/components/features/blog/TagList.astro";
import ReadingTime from "@/components/shared/ReadingTime.astro";
import Date from "@/components/shared/Date.astro";
import Icon from "astro-iconify";

interface Props {
  title: string;
  date?: string | Date;
  updateDate?: string | Date;
  tags?: string[];
  emoji?: string;
  description?: string;
  content?: string;
  type: string;
}

const {
  title,
  date,
  tags = [],
  emoji,
  description,
  content,
  type,
} = Astro.props;
---

<VStack
  alignItems="center"
  mb="8"
  gap="4"
>
  <!-- 絵文字 -->
  {emoji && (
    <Flex
      alignItems="center"
      justifyContent="center"
      fontSize={{ base: "7xl", lg: "8xl" }}
    >
      {emoji}
    </Flex>
  )}

  <!-- タイトル -->
  <s.h1
    fontSize={{ base: "3xl", lg: "4xl" }}
    fontWeight="bold"
    textAlign="center"
    m="0"
    px={{ base: "4", sm: "6", md: "8" }}
    w="full"
    maxW="4xl"
    lineHeight={{ base: "tight", lg: "normal", xl: "snug" }}
    wordBreak="break-word"
    overflowWrap="break-word"
    hyphens="auto"
    color="sz.text.main"
  >
    [{type}] {title}
  </s.h1>

  <!-- タグ -->
  {tags.length > 0 && (
    <Flex
      justifyContent="center"
      alignItems="center"
      flexWrap="wrap"
      gap="2"
      mb="4"
      maxW="4xl"
    >
      <TagList tags={tags} />
    </Flex>
  )}

  <!-- メタデータ -->
  <s.div
    rounded="lg"
    w="full"
    maxW="2xl"
  >
    <Flex
      justifyContent="center"
      alignItems={{ base: "center", sm: "flex-start" }}
      flexWrap="wrap"
      gap={{ base: "4", sm: "6" }}
      fontSize="sm"
      color="sz.text.main"
    >
      <!-- 公開日 -->
      {date && (
        <Date
          date={date}
          gap="1.5"
          type="publish"
        />
      )}

      {type && (
        <HStack gap="1.5">
          <Icon name="mdi:award" size={16} />
          <s.span color="sz.text.main" fontSize="sm">
            {type}
          </s.span>
        </HStack>
      )}

      <!-- 読了時間 -->
      <ReadingTime content={content || ""} gap="1.5" />
    </Flex>
  </s.div>

  {description && (
    <s.p
      textAlign="center"
      lineHeight="relaxed"
      maxW="2xl"
      color="sz.text.main"
      px="4"
    >
      {description}
    </s.p>
  )}
</VStack>

