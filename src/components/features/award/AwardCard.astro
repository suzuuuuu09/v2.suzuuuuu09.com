---
import { Flex, Center, styled as s } from "styled-system/jsx";
import { css, cx } from "styled-system/css";
import { Card } from "@/components/ui/Card";
import Date from "@/components/shared/Date.astro";
import BudouxText from "@/components/shared/BudouxText";

export interface Props {
	award: {
		id?: string;
		data: {
			title: string;
			slug: string;
			type: string;
			description?: string;
			date: Date;
		};
	};
}

const { award } = Astro.props as Props;
const titleText = `[${award.data.type}] ${award.data.title}`;
---

<Card maxW="full">
  <a
    href={`/award/${award.data.slug ?? award.id}/`}
    class={cx(
      css({
        width: "100%",
        display: "block",
        color: "sz.text.main",
        textDecoration: "none",
      }),
    )}
  >
    <s.div
      p={{ base: "5", md: "6" }}
      bgGradient="to-r"
      gradientFrom="sz.primary/5"
      gradientVia="sz.primary/10"
      gradientTo="sz.primary/5"
      position="relative"
    >
      <Flex direction="column" gap="4">
        <Flex align="start" gap="4">
          <!-- ÁµµÊñáÂ≠ó -->
          <div
            class={cx(
              css({
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                width: "3.5rem",
                height: "3.5rem",
                borderRadius: "xl",
                bg: "sz.brand/10",
                flexShrink: 0,
                transition: "transform 0.3s",
                _groupHover: { transform: "scale(1.05)" },
              }),
            )}
          >
            <span class={css({ fontSize: "2xl" })}>üèÜ</span>
          </div>

          <!-- „Çø„Ç§„Éà„É´ -->
          <div style={{ minWidth: 0, flex: 1 }}>
            <Flex align="center" wrap="wrap" gap="2">
              <s.h2
                lineHeight="snug"
                transition="colors 0.3s"
                fontWeight="bold"
                fontSize="xl"
                overflow="hidden"
                textOverflow="ellipsis"
                lineClamp="2"
                display="flex"
                flexWrap="wrap"
                gap="0.5"
                _groupHover={{ color: "sz.primary" }}
              >
                <BudouxText text={titleText} client:load />
              </s.h2>
            </Flex>

            <!-- Ë™¨Êòé -->
            {
              award.data.description && (
                <s.span
                  color="sz.text.sub"
                  fontSize="sm"
                  mt="2"
                  mb="3"
                  display="block"
                  style={{ overflow: "hidden" }}
                >
                  {award.data.description}
                </s.span>
              )
            }

            <!-- ÂèóË≥ûÊó•„ÉªÂá∫Â†¥Êó• -->
            <Date date={award.data.date} gap="2" type="award" />
          </div>
        </Flex>
      </Flex>
    </s.div>
  </a>
</Card>
