---
import dayjs from "dayjs";
import { Flex, Center, styled as s } from "styled-system/jsx";
import { css, cx } from "styled-system/css";
import Icon from "astro-iconify";
import { Card } from "@/components/ui/Card";

export interface Props {
  award: {
    id?: string;
    data: {
      title: string;
      slug: string;
      type: string;
      description?: string;
      date: Date;
    };
  };
}

const { award } = Astro.props as Props;
---

<Card>
  <a
    href={`/award/${award.data.slug ?? award.id}/`}
    class={cx(
      css({ width: "100%", display: "block", color: "sz.text.main", textDecoration: "none" })
    )}
  >
    <s.div
      p={{ base: "5", md: "6" }}
      bgGradient="to-r"
      gradientFrom="sz.primary/5"
      gradientVia="sz.primary/10"
      gradientTo="sz.primary/5"
      position="relative"
    >
      <Flex direction="column" gap="4">
        <Flex align="start" gap="4">
          <!-- ÁµµÊñáÂ≠ó -->
          <div
            class={cx(
              css({
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                width: "3.5rem",
                height: "3.5rem",
                borderRadius: "xl",
                bg: "sz.brand/10",
                flexShrink: 0,
                transition: "transform 0.3s",
                _groupHover: { transform: "scale(1.05)" },
              })
            )}
          >
            <span class={css({ fontSize: "2xl" })}>üèÜ</span>
          </div>

          <!-- „Çø„Ç§„Éà„É´ -->
          <div style={{ minWidth: 0, flex: 1 }}>
            <Flex align="center" wrap="wrap" gap="2">
              <s.p fontWeight="bold" fontSize="xl">
                <s.span color="sz.text.sub">[{award.data.type}]</s.span>
                <s.span className={css({ lineHeight: "snug", transition: "color 0.3s" })}>
                  {award.data.title}
                </s.span>
              </s.p>
            </Flex>

            <!-- Ë™¨Êòé -->
            {award.data.description && (
              <s.span color="sz.text.sub" fontSize="sm" mt="2" display="block" style={{ overflow: 'hidden' }}>
                {award.data.description}
              </s.span>
            )}

            <!-- ÂèóË≥ûÊó•„ÉªÂá∫Â†¥Êó• -->
            <Flex align="center" gap="2" mt="3">
              <Icon name="mdi:award" size={16}/>
              <s.time dateTime={award.data.date.toISOString()} color="sz.text.sub" fontSize="sm">
                {dayjs(award.data.date).format("YYYY.MM.DD")}
              </s.time>
            </Flex>
          </div>
        </Flex>
      </Flex>
    </s.div>
  </a>
</Card>
